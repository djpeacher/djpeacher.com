<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="SWR is a fast, lightweight, and reusable data fetching package for React that uses the stale-while-revalidate caching strategy. By using this package, you can simplify and enhance your project&rsquo;s data fetching logic.
Normally, data is fetched in a top level component using useEffect and passed down to its children using props. Additionally, logic must be added to handle errors and revalidation. This can lead to complicated and messy codebases, especially when data is needed throughout a large component tree. Enter, SWR.
"><meta name=keywords content><link rel=canonical href=https://www.djpeacher.com/posts/swr-101/><link rel=stylesheet href=https://cdn.simplecss.org/simple.min.css><link rel=stylesheet href=/css/simple-plus.css><link rel=stylesheet href=/css/custom.css><link rel=icon type=image/png sizes=32x32 href=/img/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/img/favicon-16x16.png><title>SWR 101 - React Hooks for Data Fetching | Jonathan Peacher</title><style>:root{--bg:#fff;--accent-bg:#f5f5f5;--text:#212121;--text-light:#585858;--border:#d8dae1;--accent:#212121;--code:#d81b60;--preformatted:#444;--marked:#ffdd33;--disabled:#efefef}@media(prefers-color-scheme:dark){:root{--bg:#212121;--accent-bg:#2b2b2b;--text:#dcdcdc;--text-light:#ababab;--border:#666;--accent:#809fff;--code:#f06292;--preformatted:#ccc;--marked:#ffdd33;--disabled:#111}}</style><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/SebastianAigner/twemoji-amazing@1.0.0/twemoji-amazing.css><link rel=alternate type=application/rss+xml href=/posts/index.xml title="Jonathan Peacher"><link rel=me href=https://fosstodon.org/@djpeacher><script async src=https://static.pingatron.com/ping.js data-channel=ifA4LQcinD crossorigin=anonymous></script><meta property="og:title" content="SWR 101 - React Hooks for Data Fetching"><meta property="og:description" content="SWR is a fast, lightweight, and reusable data fetching package for React that uses the stale-while-revalidate caching strategy. By using this package, you can simplify and enhance your project&rsquo;s data fetching logic.
Normally, data is fetched in a top level component using useEffect and passed down to its children using props. Additionally, logic must be added to handle errors and revalidation. This can lead to complicated and messy codebases, especially when data is needed throughout a large component tree. Enter, SWR."><meta property="og:type" content="article"><meta property="og:url" content="https://www.djpeacher.com/posts/swr-101/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-09-10T00:00:00+00:00"><meta property="article:modified_time" content="2021-09-10T00:00:00+00:00"><meta property="og:site_name" content="Jonathan Peacher"><meta property="og:image" content="https://www.djpeacher.com/posts/swr-101/og.png"></head><body><main><p><a href=/ style=font-weight:700;text-decoration:none>Jonathan Peacher</a></p><h1 style=margin-bottom:.5rem>SWR 101 - React Hooks for Data Fetching</h1><div style=margin-bottom:1.5rem><time datetime=210910>210910</time></div><p><a href=https://swr.vercel.app>SWR</a> is a fast, lightweight, and reusable data fetching package for React that uses the <a href=https://tools.ietf.org/html/rfc5861><code>stale-while-revalidate</code></a> caching strategy. By using this package, you can simplify and enhance your project&rsquo;s data fetching logic.</p><p>Normally, data is fetched in a top level component using <code>useEffect</code> and passed down to its children using props. Additionally, logic must be added to handle errors and revalidation. This can lead to complicated and messy codebases, especially when data is needed throughout a large component tree. Enter, SWR.</p><pre tabindex=0><code>npm install swr
</code></pre><pre tabindex=0><code>import useSWR from &#39;swr&#39;;

const fetcher = (url) =&gt; fetch(url).then((r) =&gt; r.json());

function App() {
  return (
    &lt;div&gt;
      &lt;Welcome /&gt;
      &lt;Avatar /&gt;
    &lt;/div&gt;
  );
}

function Welcome() {
  const { data, error } = useSWR(&#39;/api/user&#39;, fetcher);
  if (error) return &lt;div&gt;error&lt;/div&gt;;
  if (!data) return &lt;div&gt;loading&lt;/div&gt;;
  return &lt;div&gt;Welcome {data.name}!&lt;/div&gt;;
}

function Avatar() {
  const { data, error } = useSWR(&#39;/api/user&#39;, fetcher);
  if (error) return &lt;div&gt;error&lt;/div&gt;;
  if (!data) return &lt;div&gt;loading&lt;/div&gt;;
  return &lt;img src={data.avatar} alt={data.name} /&gt;;
}
</code></pre><p>In the example above, the <a href=https://swr.vercel.app/docs/options><code>useSWR(key, fetcher, options)</code></a> hook returns <code>data</code> from cache (initially undefined), then sends a fetch request using <code>fetcher</code> (a custom fetch function that can use any library you want), and finally updates <code>data</code> and the cache from the response.</p><p>The amazing thing here is that data is independent of the component tree (parents don&rsquo;t need to know anything or pass props) and because <code>useSWR</code> uses a <code>key</code> to fetch data, it avoids duplicate requests by sharing the cached data across all components (only 1 request is made). Not to mention that it handles errors and revalidation out of the box!</p><p>We can even make reusable hooks to make common fetch requests even easier to perform!</p><pre tabindex=0><code>function useUser() {
  const { data, error } = useSWR(`/api/user/`, fetcher);
  return {
    user: data,
    isLoading: !error &amp;&amp; !data,
    isError: error,
  };
}
</code></pre><p><a href=https://swr.vercel.app>SWR</a> is a powerful package that simplifies and streamlines your data fetching logic. I&rsquo;ve only touched on the core aspects of the package. For further reading, check out the links below.</p><h2 id=further-reading>Further Reading</h2><ul><li><a href=https://swr.vercel.app/docs/options>Options</a></li><li><a href=https://swr.vercel.app/docs/global-configuration>Global Configuration</a></li><li><a href=https://swr.vercel.app/docs/error-handling>Error Handling</a></li><li><a href=https://swr.vercel.app/docs/revalidation>Revalidation</a><ul><li><a href=https://swr.vercel.app/docs/revalidation#revalidate-on-focus>onFocus</a></li><li><a href=https://swr.vercel.app/docs/revalidation#revalidate-on-interval>onInterval</a></li><li><a href=https://swr.vercel.app/docs/revalidation#revalidate-on-reconnect>onReconnect</a></li></ul></li><li><a href=https://swr.vercel.app/docs/conditional-fetching>Conditional Data Fetching</a></li><li><a href=https://swr.vercel.app/docs/mutation>Mutation</a></li><li><a href=https://swr.vercel.app/docs/pagination>Pagination</a></li><li><a href=https://swr.vercel.app/examples/basic>Examples</a></li></ul><a href="mailto: reply@djpeacher.com?subject=RE: SWR%20101%20-%20React%20Hooks%20for%20Data%20Fetching">Reply via email</a></main><footer style=border:none></footer></body></html>