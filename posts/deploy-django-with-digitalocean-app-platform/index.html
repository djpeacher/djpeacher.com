<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="I&amp;rsquo;ve tried a variety of different ways to deploy Django projects over the last five years, and they all seem a bit overcomplicated. I would very much like to focus less on the infrastructure part of web development, and more on making cool stuff, particularly with Django. To that end, I&amp;rsquo;ve been looking for a simple1 and cheap2 way to throw a Django projects onto the internet, and I think DigitalOcean&amp;rsquo;s App Platform is the best I&amp;rsquo;ve found so far."><meta name=keywords content><link rel=canonical href=https://www.djpeacher.com/posts/deploy-django-with-digitalocean-app-platform/><link rel=stylesheet href=https://cdn.simplecss.org/simple.min.css><link rel=stylesheet href=/css/simple-plus.css><link rel=stylesheet href=/css/custom.css><link rel=icon type=image/png sizes=32x32 href=/img/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/img/favicon-16x16.png><title>Deploy Django with DigitalOcean App Platform | Jonathan Peacher</title><style>:root{--bg:#fff;--accent-bg:#f5f5f5;--text:#212121;--text-light:#585858;--border:#d8dae1;--accent:#212121;--code:#d81b60;--preformatted:#444;--marked:#ffdd33;--disabled:#efefef}@media(prefers-color-scheme:dark){:root{--bg:#212121;--accent-bg:#2b2b2b;--text:#dcdcdc;--text-light:#ababab;--border:#666;--accent:#809fff;--code:#f06292;--preformatted:#ccc;--marked:#ffdd33;--disabled:#111}}</style><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/SebastianAigner/twemoji-amazing@1.0.0/twemoji-amazing.css><link rel=alternate type=application/rss+xml href=/posts/index.xml title="Jonathan Peacher"><link rel=me href=https://fosstodon.org/@djpeacher><script src=https://cdn.usefathom.com/script.js data-site=KFUFSJGY defer></script></head><body><main><a href=/ style=text-decoration:none>Jonathan Peacher</a><h1 style=margin-bottom:.5rem>Deploy Django with DigitalOcean App Platform</h1><time datetime=230622>230622</time><p>I&rsquo;ve tried a variety of different ways to deploy Django projects over the last five years, and they all seem a bit overcomplicated. I would very much like to focus less on the infrastructure part of web development, and more on making cool stuff, particularly with Django. To that end, I&rsquo;ve been looking for a simple<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> and cheap<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> way to throw a Django projects onto the internet, and I think DigitalOcean&rsquo;s <a href=https://www.digitalocean.com/products/app-platform>App Platform</a> is the best I&rsquo;ve found so far.</p><p>The rest of this post is based<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup> on <a href=https://docs.digitalocean.com/tutorials/app-deploy-django-app/>DigitalOcean&rsquo;s tutorial</a>, but stripped down for anyone who just wants a TLDR on how to chuck a Django project<sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup> onto the interwebs!</p><h2 id=step-1-install-python-packages>Step 1: Install Python Packages</h2><pre tabindex=0><code>pip install django gunicorn psycopg2-binary dj-database-url
pip freeze &gt; requirements.txt
</code></pre><h2 id=step-2-update-settingspy>Step 2: Update <code>settings.py</code></h2><pre tabindex=0><code>import os
import sys
import dj_database_url

SECRET_KEY = os.getenv(&#34;DJANGO_SECRET_KEY&#34;, &#39;django-insecure-xyz&#39;)

ALLOWED_HOSTS = os.getenv(&#34;DJANGO_ALLOWED_HOSTS&#34;, &#34;127.0.0.1,localhost&#34;).split(&#34;,&#34;)

ADMIN_URL = os.getenv(&#34;ADMIN_URL&#34;, &#34;admin/&#34;)

SECURE_HSTS_SECONDS = 31536000

if DEBUG is True:
    DATABASES = {
        &#34;default&#34;: {
            &#34;ENGINE&#34;: &#34;django.db.backends.sqlite3&#34;,
            &#34;NAME&#34;: os.path.join(BASE_DIR, &#34;db.sqlite3&#34;),
        }
    }
elif len(sys.argv) &gt; 0 and sys.argv[1] != &#39;collectstatic&#39;:
    if os.getenv(&#34;DATABASE_URL&#34;, None) is None:
        raise Exception(&#34;DATABASE_URL environment variable not defined&#34;)
    DATABASES = {
        &#34;default&#34;: dj_database_url.parse(os.environ.get(&#34;DATABASE_URL&#34;)),
    }

STATIC_URL = &#34;/static/&#34;
STATIC_ROOT = os.path.join(BASE_DIR, &#34;staticfiles&#34;)
</code></pre><h2 id=step-3-deploy-on-app-platform>Step 3: Deploy on App Platform</h2><p>Navigate to the <a href=https://cloud.digitalocean.com/apps>App Platform</a><sup id=fnref:5><a href=#fn:5 class=footnote-ref role=doc-noteref>5</a></sup>.</p><h3 id=create-app>Create App</h3><ol><li>Create App â†’ Select Repo â†’ Select Branch</li><li>Check &ldquo;Autodeploy&rdquo;</li></ol><h3 id=resources>Resources</h3><h4 id=web-service>Web Service</h4><ol><li>Edit Plan â†’ Select &ldquo;Basic&rdquo; â†’ Select &ldquo;$5.00/mo &ndash; Basic&rdquo; â†’ Back</li><li>Edit Web Service â†’ Edit Run Command â†’ Save</li></ol><pre tabindex=0><code>gunicorn --worker-tmp-dir /dev/shm &lt;YOUR_PROJECT_NAME&gt;.wsgi
</code></pre><h4 id=database>Database</h4><ol><li>Add Resource â†’ Database â†’ Add</li><li>Create and Attach</li></ol><h4 id=static-site>Static Site</h4><ol><li>Add Resource â†’ Detect from Source Code â†’ Add</li><li>Select Provider â†’ Select Repo/Branch â†’ Check &ldquo;Autodeploy&rdquo; â†’ Next</li><li>Edit new Web Service</li><li>Rename to <code>&lt;PROJECT>-static</code> â†’ Save</li><li>Update &ldquo;Resource Type&rdquo; to &ldquo;Static Site&rdquo; â†’ Save</li><li>Update &ldquo;Output Directory&rdquo; to <code>staticfiles</code> â†’ Save</li><li>Update &ldquo;HTTP Request Routes&rdquo; to <code>/static</code> â†’ Save</li></ol><h3 id=environment-variables>Environment Variables</h3><ol><li>Edit Web Service resource</li><li>Add the following environment variables:</li></ol><div style=overflow-x:auto><table style=margin:0><thead><tr><th>Key</th><th>Value</th><th style=text-align:center>Encrypt</th></tr></thead><tbody><tr><td>DATABASE_URL</td><td>${db.DATABASE_URL}</td><td style=text-align:center>N</td></tr><tr><td>DJANGO_ALLOWED_HOSTS</td><td>${APP_DOMAIN}</td><td style=text-align:center>N</td></tr><tr><td>DEBUG</td><td>False</td><td style=text-align:center>N</td></tr><tr><td>ADMIN_URL</td><td>your-secret-admin/</td><td style=text-align:center>N</td></tr><tr><td>DJANGO_SECRET_KEY</td><td>your-secret-key</td><td style=text-align:center>Y</td></tr></tbody></table></div><ol start=3><li>Save</li></ol><h3 id=info>Info</h3><ol><li>Rename project, if desired â†’ Save</li></ol><h3 id=review>Review</h3><ol><li>Click &ldquo;Create Resources&rdquo;</li></ol><h3 id=post-deploy>Post Deploy</h3><ol><li>Navigate to &ldquo;Console&rdquo; tab</li><li>Run the following commands:</li></ol><pre tabindex=0><code>python manage.py migrate
python manage.py createsuperuser
</code></pre><hr><p>That it, your Django project should now be live! ðŸš€ Hopefully I laid that out as simply as possible, but feel free to checkout out <a href=https://docs.digitalocean.com/tutorials/app-deploy-django-app/>DigitalOcean&rsquo;s tutorial</a> if you&rsquo;d like more detail.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>I wish it could be simpler, but this is the best I got so far.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>Basic plans start around $12/mo.&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p>I made a few improvements like adding <code>ADMIN_URL</code> and <code>SECURE_HSTS_SECONDS</code> to achieve a 100% score on <a href=https://djcheckup.com/>djcheckup.com</a>.&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4><p>Assumption: You have a <em>simple</em> Django project.&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:5><p>Assumption: You have committed the project to a git repo and have a DigitalOcean account.&#160;<a href=#fnref:5 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div><a class="button replyButton" href="mailto: reply@djpeacher.com?subject=RE: Deploy%20Django%20with%20DigitalOcean%20App%20Platform">Reply via email</a></main><footer style=border:none></footer></body></html>