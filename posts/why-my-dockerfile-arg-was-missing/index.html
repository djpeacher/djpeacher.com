<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="I was doing some cleanup in a Dockerfile today when I noticed one of the packages was not on the correct version. It was on the latest version despite the fact there was an ARG pinning it&amp;hellip;or so I thought. After some sleuthing, I found this helpful Stack Overflow post that explained and pointed me in the right direction.
Turns out&amp;hellip;
&amp;ldquo;An ARG declared before a FROM&amp;hellip;canâ€™t be used in any instruction after a FROM."><meta name=keywords content><link rel=canonical href=http://www.djpeacher.com/posts/why-my-dockerfile-arg-was-missing/><link rel=stylesheet href=https://cdn.simplecss.org/simple.min.css><link rel=stylesheet href=/css/simple-plus.css><link rel=stylesheet href=/css/custom.css><link rel=icon type=image/png sizes=32x32 href=/img/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/img/favicon-16x16.png><title>Why My Dockerfile ARG Was Missing | Jonathan Peacher</title><style>:root{--bg:#fff;--accent-bg:#f5f5f5;--text:#212121;--text-light:#585858;--border:#d8dae1;--accent:#212121;--code:#d81b60;--preformatted:#444;--marked:#ffdd33;--disabled:#efefef}@media(prefers-color-scheme:dark){:root{--bg:#212121;--accent-bg:#2b2b2b;--text:#dcdcdc;--text-light:#ababab;--border:#666;--accent:#809fff;--code:#f06292;--preformatted:#ccc;--marked:#ffdd33;--disabled:#111}}</style><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/SebastianAigner/twemoji-amazing@1.0.0/twemoji-amazing.css><link rel=alternate type=application/rss+xml href=/posts/index.xml title="Jonathan Peacher"><link rel=me href=https://fosstodon.org/@djpeacher><script src=https://cdn.usefathom.com/script.js data-site=KFUFSJGY defer></script></head><body><header><nav></nav><h1>Why My Dockerfile ARG Was Missing</h1><time datetime=230613>230613</time></header><main><p>I was doing some cleanup in a Dockerfile today when I noticed one of the packages was not on the correct version. It was on the latest version despite the fact there was an <code>ARG</code> pinning it&mldr;or so I thought. After some sleuthing, I found this helpful <a href=https://stackoverflow.com/a/56748289>Stack Overflow post</a> that explained and pointed me in the <a href=https://docs.docker.com/engine/reference/builder/#understand-how-arg-and-from-interact>right direction</a>.</p><p>Turns out&mldr;</p><blockquote><p>&ldquo;An <code>ARG</code> declared before a <code>FROM</code>&mldr;canâ€™t be used in any instruction after a <code>FROM</code>.&rdquo;</p></blockquote><p>So the reason my package was installing the latest version was because the <code>ARG</code> didn&rsquo;t exist! Conveniently, it also didn&rsquo;t error, which is why it went unnoticed ðŸ™ƒ</p><p>The solution? Move the <code>ARG</code> down one line after the <code>FROM</code>.</p><pre tabindex=0><code># Bad
ARG VERSION=1.2.3
FROM ...

# Good
FROM ...
ARG VERSION=1.2.3
</code></pre></main></body></html>