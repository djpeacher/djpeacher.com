<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="I was doing some cleanup in a Dockerfile today when I noticed one of the packages was not on the correct version. It was on the latest version despite the fact there was an ARG pinning it&mldr;or so I thought. After some sleuthing, I found this helpful Stack Overflow post that explained and pointed me in the right direction.
Turns out&mldr;
&ldquo;An ARG declared before a FROM&mldr;canâ€™t be used in any instruction after a FROM.&rdquo;
"><meta name=keywords content><link rel=canonical href=https://www.djpeacher.com/posts/why-my-dockerfile-arg-was-missing/><link rel=stylesheet href=https://cdn.simplecss.org/simple.min.css><link rel=stylesheet href=/css/simple-plus.css><link rel=stylesheet href=/css/custom.css><link rel=icon type=image/png sizes=32x32 href=/img/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/img/favicon-16x16.png><title>Why My Dockerfile ARG Was Missing | Jonathan Peacher</title><style>:root{--bg:#fff;--accent-bg:#f5f5f5;--text:#212121;--text-light:#585858;--border:#d8dae1;--accent:#212121;--code:#d81b60;--preformatted:#444;--marked:#ffdd33;--disabled:#efefef}@media(prefers-color-scheme:dark){:root{--bg:#212121;--accent-bg:#2b2b2b;--text:#dcdcdc;--text-light:#ababab;--border:#666;--accent:#809fff;--code:#f06292;--preformatted:#ccc;--marked:#ffdd33;--disabled:#111}}</style><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/SebastianAigner/twemoji-amazing@1.0.0/twemoji-amazing.css><link rel=alternate type=application/rss+xml href=/posts/index.xml title="Jonathan Peacher"><link rel=me href=https://fosstodon.org/@djpeacher><meta property="og:title" content="Why My Dockerfile ARG Was Missing"><meta property="og:description" content="I was doing some cleanup in a Dockerfile today when I noticed one of the packages was not on the correct version. It was on the latest version despite the fact there was an ARG pinning it&mldr;or so I thought. After some sleuthing, I found this helpful Stack Overflow post that explained and pointed me in the right direction.
Turns out&mldr;

&ldquo;An ARG declared before a FROM&mldr;canâ€™t be used in any instruction after a FROM.&rdquo;"><meta property="og:type" content="article"><meta property="og:url" content="https://www.djpeacher.com/posts/why-my-dockerfile-arg-was-missing/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-06-13T00:00:00+00:00"><meta property="article:modified_time" content="2023-06-13T00:00:00+00:00"><meta property="og:site_name" content="Jonathan Peacher"><meta property="og:image" content="https://www.djpeacher.com/posts/why-my-dockerfile-arg-was-missing/og.png"></head><body><main><a href=/ style=text-decoration:none>Jonathan Peacher</a><h1 style=margin-bottom:.5rem>Why My Dockerfile ARG Was Missing</h1><div style=margin-bottom:1.5rem><time datetime=230613>230613</time></div><p>I was doing some cleanup in a Dockerfile today when I noticed one of the packages was not on the correct version. It was on the latest version despite the fact there was an <code>ARG</code> pinning it&mldr;or so I thought. After some sleuthing, I found this helpful <a href=https://stackoverflow.com/a/56748289>Stack Overflow post</a> that explained and pointed me in the <a href=https://docs.docker.com/engine/reference/builder/#understand-how-arg-and-from-interact>right direction</a>.</p><p>Turns out&mldr;</p><blockquote><p>&ldquo;An <code>ARG</code> declared before a <code>FROM</code>&mldr;canâ€™t be used in any instruction after a <code>FROM</code>.&rdquo;</p></blockquote><p>So the reason my package was installing the latest version was because the <code>ARG</code> didn&rsquo;t exist! Conveniently, it also didn&rsquo;t error, which is why it went unnoticed ðŸ™ƒ</p><p>The solution? Move the <code>ARG</code> down one line after the <code>FROM</code>.</p><pre tabindex=0><code># Bad
ARG VERSION=1.2.3
FROM ...

# Good
FROM ...
ARG VERSION=1.2.3
</code></pre><a href="mailto: reply@djpeacher.com?subject=RE: Why%20My%20Dockerfile%20ARG%20Was%20Missing">Reply via email</a></main><footer style=border:none></footer></body></html>